<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Crystal Game</title>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  </head>
<body background="assets/images/background.jpg">

  <h1>CRYSTAL COLLECTOR!</h1>

  <div class = "container"><strong>You will be given a random number at the start of the game.
  <br><br>
  There are four crystals below.
  <br><br>
    By clicking on a crystal you will add a specific amount of points to your total score.
  <br><br>
    You win the game by matching your total score to the random number.
    You lose the game if your score goes above the random number.
  <br><br>
    The value of the crystal is hidden from you until you click on it.
  <br><br>
    Each time the game starts, the game will change the values of each crystal.</strong>
  </div>

  <div class = "score">
    <p>Wins: <span id = "numWins"></span></p>
    <p>Losses: <span id = "numLosses"></span></p>
  </div>

  <div class = "numGuess">
    <h2>Number to Guess: <span id="number-to-guess"></span></h2>
  </div>

  <!-- Note that this div is now empty. We will fill it dynamically -->
  <div class = "user"> 
    <h3>Your total score is:
      <br><br> 
      <span id="userGuess"></span></h3>
  </div>

  <div id="crystals">
  </div>

  <!-- JAVASCRIPT  -->
  <!-- ========================================= -->

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <script type="text/javascript">

  var targetNumber = Math.floor(Math.random() * 102) + 19;

$("#number-to-guess").text(targetNumber);

var counter = 0;
var wins = 0;
var losses = 0;

// Now for the hard part. Creating multiple crystals each with their own unique number value.

// We begin by expanding our array to include four options.
var numberOption1 = Math.floor(Math.random() * 12) + 1;
var numberOption2 = Math.floor(Math.random() * 12) + 1;
var numberOption3 = Math.floor(Math.random() * 12) + 1;
var numberOption4 = Math.floor(Math.random() * 12) + 1;

// Next we create an if statement to create different crystal images for every numberOption.
if (numberOption1) {

  // For each iteration, we will create an imageCrystal
  var imageCrystal = $("<img>");

  // First each crystal will be given the class ".crystal-image".
  // This will allow the CSS to take effect.
  imageCrystal.addClass("crystal-image");

  // Each imageCrystal will be given a src link to the crystal image
  imageCrystal.attr("src", "assets/images/crystal1.jpg");

  // Each imageCrystal will be given a data attribute called data-crystalValue.
  // This data attribute will be set equal to the array value.
  imageCrystal.attr("data-crystalvalue", numberOption1);

  // Lastly, each crystal image (with all it classes and attributes) will get added to the page.
  $("#crystals").append(imageCrystal);
  }

  if (numberOption2) {
    var imageCrystal = $("<img>");
    imageCrystal.addClass("crystal-image");
    imageCrystal.attr("src", "assets/images/crystal2.jpg");
    imageCrystal.attr("data-crystalvalue", numberOption2);
    $("#crystals").append(imageCrystal);
    }

  if (numberOption3) {
    var imageCrystal = $("<img>");
    imageCrystal.addClass("crystal-image");
    imageCrystal.attr("src", "assets/images/crystal3.jpg");
    imageCrystal.attr("data-crystalvalue", numberOption3);
    $("#crystals").append(imageCrystal);
    }

  if (numberOption4) {
    var imageCrystal = $("<img>");
    imageCrystal.addClass("crystal-image");
    imageCrystal.attr("src", "assets/images/crystal4.jpg");
    imageCrystal.attr("data-crystalvalue", numberOption4);
    $("#crystals").append(imageCrystal);
    }


  // This time, our click event applies to every single crystal on the page. Not just one.
  $(".crystal-image").on("click", function() {

  // Determining the crystal's value requires us to extract the value from the data attribute.
  // Using the $(this) keyword specifies that we should be extracting the crystal value of the clicked crystal.
  // Using the .attr("data-crystalvalue") allows us to grab the value out of the "data-crystalvalue" attribute.
  // Since attributes on HTML elements are strings, we must convert it to an integer before adding to the counter

  var crystalValue = ($(this).attr("data-crystalvalue"));
  crystalValue = parseInt(crystalValue);
  // We then add the crystalValue to the user's "counter" which is a global variable.
  // Every click, from every crystal adds to the global counter.
  counter += crystalValue;

  // All of the same game win-lose logic applies. So the rest remains unchanged.
  // alert("New score: " + counter);
  $("#userGuess").text(counter);
  });
  
  guessMatch(counter);

  function guessMatch (character) {

  console.log(character);
  console.log(targetNumber);

    if (character = targetNumber) {
  alert("You win!");
  wins++;
  showWins();
  resetVariables();
  } 
    
    else if (character > targetNumber) {
  alert("YOU LOSE! GOOD DAY SIR! (...or try again)");
  losses++;
  showLosses();
  resetVariables();
  }
  }

  //Show total wins on page
  function showWins() {
  document.getElementById("numWins").innerHTML = wins;
  }

  //Show total losses on page
  function showLosses() {
  document.getElementById("numLosses").innerHTML = losses;
  }

  //Reset variables for next game
  function resetVariables () {
  var numberOption1 = Math.floor(Math.random() * 12) + 1;
  var numberOption2 = Math.floor(Math.random() * 12) + 1;
  var numberOption3 = Math.floor(Math.random() * 12) + 1;
  var numberOption4 = Math.floor(Math.random() * 12) + 1;
  var targetNumber = Math.floor(Math.random() * 102) + 19;
  console.log(targetNumber);
  }

</script>
</body>
</html>
